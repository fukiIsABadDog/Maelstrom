@page
@model Maelstrom.Areas.User.Pages.SiteManager.IndexModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Site Manager";
}
<div class="row">
    <div class="row">
        <div class="col-3"></div>
        <div class="col-6 text-center" style=" background-color:floralwhite">
            <h1>Site Manager</h1>
        </div>
        <div class="col-3"></div>
    </div>
    <div class="col-1 col-xxl-2"></div>
    <div class="col">
        <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3  row-cols-xxl-4 g-4 mt-5">
            @foreach (var item in Model.CurrentUserSites)
            {
                <div class="col">
                    <div class="card shadow ms-2 me-2 mt-2">
                        @if (@Model.ImageDictionary[item.SiteID] != String.Empty)
                        {
                            <img src=@Model.ImageDictionary[item.SiteID] class="card-img-top" alt="DB Image">
                        }
                        else
                        {
                            <img src="~/media/UserImages/default.jpg" class="card-img-top" alt="Default Image">
                        }
                        <div class="card-body" style="background-color:floralwhite">
                            <div class="row shadow p-3 mb-1 rounded text-center">
                                <h5 class="card-title">@item.Name</h5>
                            </div>
                        </div>
                        <table class="table table-striped table-hover" style="margin-bottom:0px">
                            <th>
                                Capacity
                            </th>
                            <th>
                                Type
                            </th>
                            <th>
                                Location
                            </th>
                            <tbody>
                                <tr>
                                    <td>@item.Capacity</td>
                                    <td>@Model.SiteTypeDictionary[item.SiteTypeID]</td>
                                    <td>@item.Location</td>
                                </tr>
                        </table>
                        <div class="card-body text-center" style="background-color:floralwhite">
                            <div class="row">
                                <div class="col-6">
                                    <a asp-page="./TestResults" asp-route-id="@item.SiteID" class="btn  btn-primary w-100">All Results</a>
                                    <a asp-page="/ResultManager/Create" asp-route-id="@item.SiteID"
                                        class="btn  btn-success w-100">Add Result</a>
                                </div>
                                <div class="col-6">
                                      <a asp-page="/SiteUserManager/Index" asp-route-id="@item.SiteID"
                                        class="btn btn-dark w-100">Manage Users </a>
                                    <a asp-page="./Edit" asp-route-id="@item.SiteID" class="btn  btn-warning w-100">Edit</a>
                                    <a asp-page="./Delete" asp-route-id="@item.SiteID" class="btn  btn-danger w-100">Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
            <div class="col">
                <div class="card shadow  ms-2 me-2 mt-2">
                    <div class="card-body text-center" style="background-color:floralwhite">
                        <a asp-page="./create" class="btn btn-success btn-lg">Create New</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-1 col-xxl-2"></div>
    </div>
</div>